import{r as e,j as i}from"./index-Cb5Uq9R4.js";import{P as C}from"./PlatformToolLayout-rep_d1Yz.js";const L=[{value:"opensearch",label:"OpenSearch"},{value:"toolbar",label:"Toolbar"},{value:"mobile",label:"Mobile"}],O=c=>{const{keyword:b,setKeyword:y,searchLanguage:m}=c,t=b??"",[a,S]=e.useState("opensearch"),[k,u]=e.useState([]),[v,h]=e.useState(!1),[j,r]=e.useState(null),n=e.useRef(!1),s=e.useCallback(async o=>{const w=o.trim();if(!w){u([]),r(null);return}h(!0),r(null);try{const d=new URLSearchParams({q:w,lang:(m||"").toLowerCase(),client:a}),l=await fetch(`/api/platforms/qwant?${d.toString()}`);if(!l.ok){const g=await l.json().catch(()=>null);throw new Error(g?.error||"Onbekende Qwant fout")}const f=await l.json(),p=(Array.isArray(f?.suggestions)?f.suggestions:[]).map((g,E)=>({title:g,subtitle:`Qwant (${f?.metadata?.client||a})`,metric:`Suggestie #${E+1}`}));u(p),p.length===0&&r("Geen Qwant suggesties gevonden voor dit zoekwoord.")}catch(d){const l=d instanceof Error?d.message:"Onbekende fout";r(l),u([])}finally{h(!1)}},[a,m]);e.useEffect(()=>{if(!t.trim()){u([]),r(null),n.current=!1;return}n.current||(n.current=!0,s(t))},[t,s]),e.useEffect(()=>{t.trim()&&n.current&&s(t)},[a,t,s]);const x=e.useMemo(()=>i.jsx("div",{className:"platform-tool__filters",children:i.jsxs("label",{htmlFor:"qwant-client",children:["Client",i.jsx("select",{id:"qwant-client",value:a,onChange:o=>{S(o.target.value),n.current=!1},children:L.map(o=>i.jsx("option",{value:o.value,children:o.label},o.value))})]})}),[a]);return i.jsx(C,{platformName:"Qwant",keyword:t,onKeywordChange:y,onSearch:s,description:"Europese zoekmachine Qwant autocomplete.",extraFilters:x,results:k,placeholder:"Welke zoekterm wil je bekijken?",loading:v,error:j,emptyState:"Voer een zoekwoord in om Qwant suggesties te zien.",controls:c.locationControls,onGlobalSearch:c.onGlobalSearch,globalLoading:c.globalLoading})};export{O as default};
