import{r,j as f}from"./index-Cb5Uq9R4.js";import{P as R}from"./PlatformToolLayout-rep_d1Yz.js";const w=[{code:"wt-wt",label:"Wereldwijd"},{code:"us-en",label:"United States (English)"},{code:"uk-en",label:"United Kingdom (English)"},{code:"nl-nl",label:"Nederland (Nederlands)"},{code:"de-de",label:"Deutschland (Deutsch)"},{code:"fr-fr",label:"France (Français)"},{code:"es-es",label:"España (Español)"},{code:"it-it",label:"Italia (Italiano)"},{code:"jp-jp",label:"日本 (日本語)"},{code:"in-en",label:"India (English)"},{code:"br-pt",label:"Brasil (Português)"}],x=new Set(w.map(s=>s.code.toLowerCase())),N="wt-wt",S=(s,h)=>{const a=(s||"").split("-")[0].toLowerCase(),n=(h||"").split("-")[0].toLowerCase();if(a&&n){const o=`${n}-${a}`;if(x.has(o))return o}if(a)for(const o of w){const e=o.code.toLowerCase();if(e.endsWith(`-${a}`)||e.startsWith(`${a}-`))return e}return N},K=s=>{const{keyword:h,setKeyword:a,searchLanguage:n,country:o}=s,e=h??"",[c,b]=r.useState(()=>S(n,o)),[j,k]=r.useState([]),[G,y]=r.useState(!1),[C,i]=r.useState(null),u=r.useRef(!1);r.useEffect(()=>{b(S(n,o))},[n,o]);const d=r.useCallback(async l=>{const D=l.trim();if(!D){k([]),i(null);return}y(!0),i(null);try{const p=new URLSearchParams({q:D,kl:c,lang:(n||"").toLowerCase(),country:(o||"").toUpperCase()}),g=await fetch(`/api/platforms/duckduckgo?${p.toString()}`);if(!g.ok){const t=await g.json().catch(()=>null);throw new Error(t?.error||"Onbekende DuckDuckGo fout")}const m=await g.json(),E=(Array.isArray(m?.suggestions)?m.suggestions:[]).filter(t=>typeof t?.phrase=="string"&&t.phrase.trim().length>0).map((t,v)=>({title:t.phrase,subtitle:t.snippet||`DuckDuckGo (${m?.kl||c})`,metric:typeof t.score=="number"&&Number.isFinite(t.score)?`Relevantie score ${t.score}`:`Suggestie #${v+1}`}));k(E),E.length===0&&i("Geen DuckDuckGo suggesties gevonden voor dit zoekwoord.")}catch(p){const g=p instanceof Error?p.message:"Onbekende fout";i(g),k([])}finally{y(!1)}},[c,n,o]);r.useEffect(()=>{if(!e.trim()){k([]),i(null),u.current=!1;return}u.current||(u.current=!0,d(e))},[e,d]),r.useEffect(()=>{e.trim()&&u.current&&d(e)},[c,e,d]);const L=r.useMemo(()=>f.jsx("div",{className:"platform-tool__filters",children:f.jsxs("label",{htmlFor:"duckduckgo-region",children:["Regio",f.jsx("select",{id:"duckduckgo-region",value:c,onChange:l=>{b(l.target.value),u.current=!1},children:w.map(l=>f.jsx("option",{value:l.code,children:l.label},l.code))})]})}),[c]);return f.jsx(R,{platformName:"DuckDuckGo",keyword:e,onKeywordChange:a,onSearch:d,description:"Ontdek privacyvriendelijke zoekopdrachten met DuckDuckGo autocomplete.",extraFilters:L,results:j,placeholder:"Welke zoekterm wil je onderzoeken?",loading:G,error:C,emptyState:"Voer een zoekwoord in om DuckDuckGo suggesties te zien.",controls:s.locationControls,onGlobalSearch:s.onGlobalSearch,globalLoading:s.globalLoading})};export{K as default};
