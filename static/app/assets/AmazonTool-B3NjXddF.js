import{r as o,A as C,j as a}from"./index-Cb5Uq9R4.js";import{P as L}from"./PlatformToolLayout-rep_d1Yz.js";const m=C,K=n=>{const{keyword:z,setKeyword:A,country:S}=n,t=z??"",[f,w]=o.useState(()=>{const e=(S??"").toUpperCase();return m.some(u=>u.code===e)?e:"US"}),[b,s]=o.useState([]),[E,h]=o.useState(!1),[j,l]=o.useState(null),c=o.useRef(!1),i=o.useMemo(()=>m.find(e=>e.code===f)??m[0],[f]),p=o.useCallback(async e=>{const u=e.trim();if(!u){s([]);return}h(!0),l(null);try{const d=new URLSearchParams({q:u,country:i.code,alias:"aps"}),r=await fetch(`/api/platforms/amazon?${d.toString()}`);if(!r.ok){const g=await r.json().catch(()=>null);throw new Error(g?.error||"Onbekende fout bij Amazon data")}const k=await r.json(),y=(Array.isArray(k?.suggestions)?k.suggestions:[]).map((g,x)=>({title:g,subtitle:`Suggestie voor ${i.label}`,metric:`Populariteit #${x+1}`}));s(y),y.length===0&&l("Geen Amazon suggesties gevonden voor dit zoekwoord.")}catch(d){const r=d instanceof Error?d.message:"Onbekende fout";l(r),s([])}finally{h(!1)}},[i.code,i.label]);o.useEffect(()=>{c.current||t.trim()&&(c.current=!0,p(t))},[t,p]),o.useEffect(()=>{t.trim()||(s([]),l(null),c.current=!1)},[t]);const v=a.jsx("div",{className:"platform-tool__filters",children:a.jsxs("label",{htmlFor:"amazon-marketplace",children:["Marketplace",a.jsx("select",{id:"amazon-marketplace",value:f,onChange:e=>{w(e.target.value),c.current=!1},children:m.map(e=>a.jsx("option",{value:e.code,children:e.label},e.code))})]})});return a.jsx(L,{platformName:"Amazon",keyword:t,onKeywordChange:A,onSearch:p,description:"Productzoekwoorden en listing-optimalisatie voor Amazon.",extraFilters:v,results:b,placeholder:"Welke producten verkoop je?",loading:E,error:j,emptyState:"Voer een zoekwoord in om Amazon inzichten te zien.",controls:n.locationControls,onGlobalSearch:n.onGlobalSearch,globalLoading:n.globalLoading})};export{K as default};
