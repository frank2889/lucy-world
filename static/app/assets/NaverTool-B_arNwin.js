import{r,j as L}from"./index-Cb5Uq9R4.js";import{P as N}from"./PlatformToolLayout-rep_d1Yz.js";const C=n=>{const{keyword:h,setKeyword:w,searchLanguage:l,country:c}=n,e=h??"",[p,i]=r.useState([]),[v,g]=r.useState(!1),[k,o]=r.useState(null),u=r.useRef(!1),a=r.useCallback(async S=>{const d=S.trim();if(!d){i([]),o(null);return}g(!0),o(null);try{const t=new URLSearchParams({q:d});l&&t.set("lang",l.toLowerCase()),c&&t.set("country",c.toLowerCase());const s=await fetch(`/api/platforms/naver?${t.toString()}`);if(!s.ok){const f=await s.json().catch(()=>null);throw new Error(f?.error||"Onbekende Naver fout")}const m=await s.json(),y=(Array.isArray(m?.suggestions)?m.suggestions:[]).map((f,b)=>({title:f,subtitle:"Naver autosuggest resultaat",metric:`인기 #${b+1}`}));i(y),y.length===0&&o("Geen Naver suggesties gevonden voor dit zoekwoord.")}catch(t){const s=t instanceof Error?t.message:"Onbekende fout";o(s),i([])}finally{g(!1)}},[l,c]);return r.useEffect(()=>{if(!e.trim()){i([]),o(null),u.current=!1;return}u.current||(u.current=!0,a(e))},[e,a]),r.useEffect(()=>{e.trim()&&u.current&&a(e)},[l,c,e,a]),L.jsx(N,{platformName:"Naver",keyword:e,onKeywordChange:w,onSearch:a,description:"Zoekgedrag en contentformats voor Naver.",results:p,placeholder:"Welke Koreaanse term analyseer je?",loading:v,error:k,emptyState:"Voer een zoekwoord in om Naver kansen te zien.",controls:n.locationControls,onGlobalSearch:n.onGlobalSearch,globalLoading:n.globalLoading})};export{C as default};
