import{r as e,j as c}from"./index-Cb5Uq9R4.js";import{P as E}from"./PlatformToolLayout-rep_d1Yz.js";const L=[{value:"web",label:"Web"},{value:"news",label:"Nieuws"},{value:"videos",label:"Video"}],R=i=>{const{keyword:w,setKeyword:y,searchLanguage:m,country:z}=i,r=w??"",[o,p]=e.useState("web"),[S,u]=e.useState([]),[k,v]=e.useState(!1),[j,s]=e.useState(null),a=e.useRef(!1),n=e.useCallback(async t=>{const h=t.trim();if(!h){u([]),s(null);return}v(!0),s(null);try{const d=new URLSearchParams({q:h,lang:(m||"").toLowerCase(),source:o}),l=await fetch(`/api/platforms/brave?${d.toString()}`);if(!l.ok){const f=await l.json().catch(()=>null);throw new Error(f?.error||"Onbekende Brave fout")}const g=await l.json(),b=(Array.isArray(g?.suggestions)?g.suggestions:[]).map((f,B)=>({title:f,subtitle:`Brave (${g?.metadata?.source||o})`,metric:`Suggestie #${B+1}`}));u(b),b.length===0&&s("Geen Brave suggesties gevonden voor dit zoekwoord.")}catch(d){const l=d instanceof Error?d.message:"Onbekende fout";s(l),u([])}finally{v(!1)}},[o,m]);e.useEffect(()=>{if(!r.trim()){u([]),s(null),a.current=!1;return}a.current||(a.current=!0,n(r))},[r,n]),e.useEffect(()=>{r.trim()&&a.current&&n(r)},[o,r,n]);const x=e.useMemo(()=>c.jsx("div",{className:"platform-tool__filters",children:c.jsxs("label",{htmlFor:"brave-source",children:["Bron",c.jsx("select",{id:"brave-source",value:o,onChange:t=>{p(t.target.value),a.current=!1},children:L.map(t=>c.jsx("option",{value:t.value,children:t.label},t.value))})]})}),[o]);return c.jsx(E,{platformName:"Brave",keyword:r,onKeywordChange:y,onSearch:n,description:"Privacyvriendelijke Brave Search suggesties.",extraFilters:x,results:S,placeholder:"Welke zoekterm wil je onderzoeken?",loading:k,error:j,emptyState:"Voer een zoekwoord in om Brave suggesties te zien.",controls:i.locationControls,onGlobalSearch:i.onGlobalSearch,globalLoading:i.globalLoading})};export{R as default};
