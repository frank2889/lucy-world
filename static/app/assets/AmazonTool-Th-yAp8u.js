import{r as o,j as r}from"./index-DbsFPuxG.js";import{P as x}from"./PlatformToolLayout-Cks7JTvg.js";const d=[{code:"US",label:"Amazon.com (US)"},{code:"CA",label:"Amazon.ca (CA)"},{code:"GB",label:"Amazon.co.uk (UK)"},{code:"DE",label:"Amazon.de (DE)"},{code:"FR",label:"Amazon.fr (FR)"},{code:"IT",label:"Amazon.it (IT)"},{code:"ES",label:"Amazon.es (ES)"},{code:"NL",label:"Amazon.nl (NL)"},{code:"SE",label:"Amazon.se (SE)"},{code:"PL",label:"Amazon.pl (PL)"},{code:"BE",label:"Amazon.be (BE)"},{code:"AU",label:"Amazon.com.au (AU)"},{code:"JP",label:"Amazon.co.jp (JP)"},{code:"IN",label:"Amazon.in (IN)"}],U=({keyword:g,setKeyword:h,country:E})=>{const a=g??"",[u,S]=o.useState(()=>{const e=(E??"").toUpperCase();return d.some(i=>i.code===e)?e:"US"}),[k,n]=o.useState([]),[y,z]=o.useState(!1),[j,s]=o.useState(null),l=o.useRef(!1),c=o.useMemo(()=>d.find(e=>e.code===u)??d[0],[u]),p=o.useCallback(async e=>{const i=e.trim();if(!i){n([]);return}z(!0),s(null);try{const m=new URLSearchParams({q:i,country:c.code,alias:"aps"}),t=await fetch(`/api/platforms/amazon?${m.toString()}`);if(!t.ok){const f=await t.json().catch(()=>null);throw new Error(f?.error||"Onbekende fout bij Amazon data")}const A=await t.json(),b=(Array.isArray(A?.suggestions)?A.suggestions:[]).map((f,v)=>({title:f,subtitle:`Suggestie voor ${c.label}`,metric:`Populariteit #${v+1}`}));n(b),b.length===0&&s("Geen Amazon suggesties gevonden voor dit zoekwoord.")}catch(m){const t=m instanceof Error?m.message:"Onbekende fout";s(t),n([])}finally{z(!1)}},[c.code,c.label]);o.useEffect(()=>{l.current||a.trim()&&(l.current=!0,p(a))},[a,p]),o.useEffect(()=>{a.trim()||(n([]),s(null),l.current=!1)},[a]);const w=r.jsx("div",{className:"platform-tool__filters",children:r.jsxs("label",{htmlFor:"amazon-marketplace",children:["Marketplace",r.jsx("select",{id:"amazon-marketplace",value:u,onChange:e=>{S(e.target.value),l.current=!1},children:d.map(e=>r.jsx("option",{value:e.code,children:e.label},e.code))})]})});return r.jsx(x,{platformName:"Amazon",keyword:a,onKeywordChange:h,onSearch:p,description:"Productzoekwoorden en listing-optimalisatie voor Amazon.",extraFilters:w,results:k,placeholder:"Welke producten verkoop je?",loading:y,error:j,emptyState:"Voer een zoekwoord in om Amazon inzichten te zien."})};export{U as default};
