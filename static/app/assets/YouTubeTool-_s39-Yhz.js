import{r as e,c as E,j as T}from"./index-BDOXOsBe.js";import{P}from"./PlatformToolLayout-BA_VPfgq.js";const M=y=>{const{keyword:d,setKeyword:b,searchLanguage:n,ui:a,uiFallback:u,locationControls:h,onGlobalSearch:S,globalLoading:w}=y,[x,r]=e.useState([]),[L,c]=e.useState(!1),[k,m]=e.useState(null),t=e.useMemo(()=>E(a,u),[a,u]),i=e.useMemo(()=>(n||a?.lang||"en").split("-")[0].toLowerCase(),[n,a?.lang]),p=e.useCallback(async s=>{const g=s.trim();if(!g){r([]);return}c(!0),m(null);try{const l=new URLSearchParams({q:g,lang:i}),f=await fetch(`/api/platforms/youtube?${l.toString()}`),o=await f.json().catch(()=>({}));if(!f.ok)throw new Error(o?.error||t("platform.youtube.errors.fetch"));const C=(Array.isArray(o?.suggestions)?o.suggestions:[]).map(j=>({title:j,subtitle:t("platform.youtube.results.subtitle"),metric:o?.metadata?.approx_volume?t("platform.youtube.results.metric",{volume:o.metadata.approx_volume}):void 0}));r(C)}catch(l){m(l?.message||t("platform.youtube.errors.generic")),r([])}finally{c(!1)}},[i,t]),v=e.useCallback(s=>{p(s)},[p]);return T.jsx(P,{platformName:t("platform.youtube.meta.name"),keyword:d||"",onKeywordChange:b,onSearch:v,description:t("platform.youtube.description"),results:x,placeholder:t("platform.youtube.placeholder"),emptyState:t("platform.youtube.emptyState"),loading:L,error:k,controls:h,onGlobalSearch:S,globalLoading:w,translate:t})};export{M as default};
