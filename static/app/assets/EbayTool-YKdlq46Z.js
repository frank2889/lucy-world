import{r as e,j as u}from"./index-Cb5Uq9R4.js";import{P as C}from"./PlatformToolLayout-rep_d1Yz.js";const f=[{country:"US",siteId:"0",label:"United States (eBay.com)"},{country:"CA",siteId:"2",label:"Canada (eBay.ca)"},{country:"GB",siteId:"3",label:"United Kingdom (eBay.co.uk)"},{country:"AU",siteId:"15",label:"Australia (eBay.com.au)"},{country:"AT",siteId:"16",label:"Austria (eBay.at)"},{country:"FR",siteId:"71",label:"France (eBay.fr)"},{country:"DE",siteId:"77",label:"Germany (eBay.de)"},{country:"BE",siteId:"23",label:"Belgium (eBay.be)"},{country:"IT",siteId:"101",label:"Italy (eBay.it)"},{country:"NL",siteId:"146",label:"Netherlands (eBay.nl)"},{country:"ES",siteId:"186",label:"Spain (eBay.es)"}],L="0",k=r=>{const m=(r||"").toUpperCase();return f.find(a=>a.country===m)?.siteId??L},z=r=>{const{keyword:m,setKeyword:b,country:a}=r,o=m??"",[s,p]=e.useState(()=>k(a)),[w,d]=e.useState([]),[v,h]=e.useState(!1),[j,n]=e.useState(null),l=e.useRef(!1),I=e.useMemo(()=>f.find(t=>t.siteId===s)??f[0],[s]);e.useEffect(()=>{p(k(a))},[a]);const i=e.useCallback(async t=>{const B=t.trim();if(!B){d([]),n(null);return}h(!0),n(null);try{const y=new URLSearchParams({q:B,siteId:s,country:(a||"").toUpperCase(),max:"10"}),c=await fetch(`/api/platforms/ebay?${y.toString()}`);if(!c.ok){const g=await c.json().catch(()=>null);throw new Error(g?.error||"Onbekende eBay fout")}const S=await c.json(),E=(Array.isArray(S?.suggestions)?S.suggestions:[]).map((g,A)=>({title:g,subtitle:`Zoeksuggestie uit ${I.label}`,metric:`Populariteit #${A+1}`}));d(E),E.length===0&&n("Geen eBay suggesties gevonden voor dit zoekwoord.")}catch(y){const c=y instanceof Error?y.message:"Onbekende fout";n(c),d([])}finally{h(!1)}},[s,a,I.label]);e.useEffect(()=>{if(!o.trim()){d([]),n(null),l.current=!1;return}l.current||(l.current=!0,i(o))},[o,i]),e.useEffect(()=>{o.trim()&&l.current&&i(o)},[s,o,i]);const x=u.jsx("div",{className:"platform-tool__filters",children:u.jsxs("label",{htmlFor:"ebay-site",children:["Marketplace",u.jsx("select",{id:"ebay-site",value:s,onChange:t=>{p(t.target.value),l.current=!1},children:f.map(t=>u.jsx("option",{value:t.siteId,children:t.label},t.siteId))})]})});return u.jsx(C,{platformName:"eBay",keyword:o,onKeywordChange:b,onSearch:i,description:"Listing- en prijsstrategieÃ«n voor eBay.",extraFilters:x,results:w,placeholder:"Welk product verkoop je op eBay?",loading:v,error:j,emptyState:"Voer een zoekwoord in voor eBay inzichten.",controls:r.locationControls,onGlobalSearch:r.onGlobalSearch,globalLoading:r.globalLoading})};export{z as default};
