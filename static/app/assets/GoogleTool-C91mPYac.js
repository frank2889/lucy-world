import{r as e,c as E,j as U}from"./index-C-suCUV6.js";import{P}from"./PlatformToolLayout-Dv7YUvVj.js";const q=r=>{const{keyword:G,setKeyword:k,searchLanguage:p,country:m,ui:l}=r,[C,c]=e.useState([]),[L,h]=e.useState(!1),[x,s]=e.useState(null),o=e.useMemo(()=>E(l),[l]),d=e.useMemo(()=>(p||l?.lang||"en").split("-")[0].toLowerCase(),[p,l?.lang]),i=e.useMemo(()=>(m||"").trim().toUpperCase(),[m]),y=e.useCallback(async f=>{const w=f.trim();if(!w){c([]),s(null);return}h(!0),s(null);try{const n=new URLSearchParams({q:w,lang:d||"en"});i&&n.set("country",i);const b=await fetch(`/api/platforms/google?${n.toString()}`),t=await b.json().catch(()=>({}));if(!b.ok)throw new Error(t?.error||o("platform.google.error.fetch","Unable to fetch Google suggestions"));const S=(Array.isArray(t?.suggestions)?t.suggestions:[]).map((a,R)=>{let g=null;if(typeof a=="string"?g=a:a&&typeof a=="object"&&(g=a.phrase||a.keyword||a.text||null),!g)return null;const u=[];return t?.metadata?.hl&&u.push(o("platform.google.subtitle.language","Language: {{language}}",{language:t.metadata.hl.toUpperCase()})),t?.metadata?.gl&&u.push(o("platform.google.subtitle.country","Country: {{country}}",{country:t.metadata.gl})),{title:g,subtitle:u.length?u.join(" â€¢ "):o("platform.google.result.subtitle","Google suggestion"),metric:o("platform.google.result.rank","#{{rank}}",{rank:R+1})}}).filter(Boolean);c(S),S.length===0&&s(o("platform.google.error.none","No Google suggestions found for this keyword."))}catch(n){s(n?.message||o("platform.google.error.generic","Unable to fetch Google suggestions")),c([])}finally{h(!1)}},[d,i,o]),j=e.useCallback(f=>{y(f)},[y]);return U.jsx(P,{platformName:o("platform.google.meta.name","Google"),keyword:G||"",onKeywordChange:k,onSearch:j,description:o("platform.google.description","Real-time autocomplete suggestions from Google Search."),results:C,placeholder:o("platform.google.placeholder","What are people searching for on Google?"),loading:L,error:x,emptyState:o("platform.google.empty","Enter a term to view Google suggestions."),controls:r.locationControls,onGlobalSearch:r.onGlobalSearch,globalLoading:r.globalLoading,translate:o})};export{q as default};
