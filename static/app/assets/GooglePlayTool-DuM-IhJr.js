import{r as e,j as d}from"./index-Cb5Uq9R4.js";import{P as A}from"./PlatformToolLayout-rep_d1Yz.js";const E=[{code:"US",label:"United States"},{code:"GB",label:"United Kingdom"},{code:"CA",label:"Canada"},{code:"AU",label:"Australia"},{code:"DE",label:"Germany"},{code:"FR",label:"France"},{code:"ES",label:"Spain"},{code:"IT",label:"Italy"},{code:"NL",label:"Netherlands"},{code:"BR",label:"Brazil"},{code:"IN",label:"India"}],k=a=>{const f=(a||"").toUpperCase();return E.find(r=>r.code===f)?.code??"US"},O=a=>{const{keyword:f,setKeyword:h,searchLanguage:r,country:m}=a,o=f??"",[l,b]=e.useState(()=>k(m)),[P,u]=e.useState([]),[j,S]=e.useState(!1),[v,n]=e.useState(null),s=e.useRef(!1),x=e.useMemo(()=>E,[]);e.useEffect(()=>{b(k(m))},[m]);const c=e.useCallback(async t=>{const w=t.trim();if(!w){u([]),n(null);return}S(!0),n(null);try{const g=new URLSearchParams({q:w,country:l,lang:(r||"").toLowerCase(),limit:"10"}),i=await fetch(`/api/platforms/googleplay?${g.toString()}`);if(!i.ok){const p=await i.json().catch(()=>null);throw new Error(p?.error||"Onbekende Google Play fout")}const y=await i.json(),G=(Array.isArray(y?.suggestions)?y.suggestions:[]).map((p,R)=>({title:p,subtitle:`Zoeksuggestie (${y?.country?.toUpperCase()||l})`,metric:`Populariteit #${R+1}`}));u(G),G.length===0&&n("Geen Google Play suggesties gevonden voor dit zoekwoord.")}catch(g){const i=g instanceof Error?g.message:"Onbekende fout";n(i),u([])}finally{S(!1)}},[l,r]);e.useEffect(()=>{if(!o.trim()){u([]),n(null),s.current=!1;return}s.current||(s.current=!0,c(o))},[o,c]),e.useEffect(()=>{o.trim()&&s.current&&c(o)},[l,r,o,c]);const L=d.jsx("div",{className:"platform-tool__filters",children:d.jsxs("label",{htmlFor:"google-play-region",children:["Regio",d.jsx("select",{id:"google-play-region",value:l,onChange:t=>{b(t.target.value),s.current=!1},children:x.map(t=>d.jsx("option",{value:t.code,children:t.label},t.code))})]})});return d.jsx(A,{platformName:"Google Play",keyword:o,onKeywordChange:h,onSearch:c,description:"ASO voor Android apps in Google Play.",extraFilters:L,results:P,placeholder:"Welk Android keyword onderzoek je?",loading:j,error:v,emptyState:"Voer een zoekwoord in om Google Play kansen te zien.",controls:a.locationControls,onGlobalSearch:a.onGlobalSearch,globalLoading:a.globalLoading})};export{O as default};
