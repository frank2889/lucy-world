import{r as e,j as c}from"./index-Cb5Uq9R4.js";import{P as Y}from"./PlatformToolLayout-rep_d1Yz.js";const z=[5,10,15,20],C=r=>{const u=Number(r);return Number.isFinite(u)?Math.min(Math.max(Math.round(u),1),20):10},F=r=>{const{keyword:u,setKeyword:S,searchLanguage:p,country:g}=r,o=u??"",[a,x]=e.useState(()=>C(void 0)),[j,m]=e.useState([]),[k,y]=e.useState(!1),[v,s]=e.useState(null),n=e.useRef(!1),l=e.useCallback(async t=>{const b=t.trim();if(!b){m([]),s(null);return}y(!0),s(null);try{const d=new URLSearchParams({q:b,lang:(p||"").toLowerCase(),country:(g||"").toUpperCase(),limit:String(a)}),i=await fetch(`/api/platforms/yahoo?${d.toString()}`);if(!i.ok){const f=await i.json().catch(()=>null);throw new Error(f?.error||"Onbekende Yahoo fout")}const h=await i.json(),w=(Array.isArray(h?.suggestions)?h.suggestions:[]).map((f,E)=>({title:f,subtitle:`Yahoo (${h?.country||g||"global"})`,metric:`Suggestie #${E+1}`}));m(w),w.length===0&&s("Geen Yahoo suggesties gevonden voor dit zoekwoord.")}catch(d){const i=d instanceof Error?d.message:"Onbekende fout";s(i),m([])}finally{y(!1)}},[a,p,g]);e.useEffect(()=>{if(!o.trim()){m([]),s(null),n.current=!1;return}n.current||(n.current=!0,l(o))},[o,l]),e.useEffect(()=>{o.trim()&&n.current&&l(o)},[a,o,l]);const L=e.useMemo(()=>c.jsx("div",{className:"platform-tool__filters",children:c.jsxs("label",{htmlFor:"yahoo-limit",children:["Resultaten",c.jsx("select",{id:"yahoo-limit",value:a,onChange:t=>{x(Number(t.target.value)),n.current=!1},children:z.map(t=>c.jsx("option",{value:t,children:t},t))})]})}),[a]);return c.jsx(Y,{platformName:"Yahoo",keyword:o,onKeywordChange:S,onSearch:l,description:"Yahoo zoekopdrachten met autocomplete suggesties.",extraFilters:L,results:j,placeholder:"Waar ben je naar op zoek?",loading:k,error:v,emptyState:"Voer een zoekwoord in om Yahoo suggesties te zien.",controls:r.locationControls,onGlobalSearch:r.onGlobalSearch,globalLoading:r.globalLoading})};export{F as default};
