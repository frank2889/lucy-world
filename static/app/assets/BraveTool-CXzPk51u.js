import{r as e,j as i}from"./index-CgW13nsE.js";import{P as B}from"./PlatformToolLayout-BUBe3-FM.js";const E=[{value:"web",label:"Web"},{value:"news",label:"Nieuws"},{value:"videos",label:"Video"}],P=({keyword:h,setKeyword:w,searchLanguage:m})=>{const r=h??"",[s,b]=e.useState("web"),[y,u]=e.useState([]),[S,v]=e.useState(!1),[j,o]=e.useState(null),a=e.useRef(!1),n=e.useCallback(async t=>{const g=t.trim();if(!g){u([]),o(null);return}v(!0),o(null);try{const c=new URLSearchParams({q:g,lang:(m||"").toLowerCase(),source:s}),l=await fetch(`/api/platforms/brave?${c.toString()}`);if(!l.ok){const f=await l.json().catch(()=>null);throw new Error(f?.error||"Onbekende Brave fout")}const d=await l.json(),p=(Array.isArray(d?.suggestions)?d.suggestions:[]).map((f,x)=>({title:f,subtitle:`Brave (${d?.metadata?.source||s})`,metric:`Suggestie #${x+1}`}));u(p),p.length===0&&o("Geen Brave suggesties gevonden voor dit zoekwoord.")}catch(c){const l=c instanceof Error?c.message:"Onbekende fout";o(l),u([])}finally{v(!1)}},[s,m]);e.useEffect(()=>{if(!r.trim()){u([]),o(null),a.current=!1;return}a.current||(a.current=!0,n(r))},[r,n]),e.useEffect(()=>{r.trim()&&a.current&&n(r)},[s,r,n]);const k=e.useMemo(()=>i.jsx("div",{className:"platform-tool__filters",children:i.jsxs("label",{htmlFor:"brave-source",children:["Bron",i.jsx("select",{id:"brave-source",value:s,onChange:t=>{b(t.target.value),a.current=!1},children:E.map(t=>i.jsx("option",{value:t.value,children:t.label},t.value))})]})}),[s]);return i.jsx(B,{platformName:"Brave",keyword:r,onKeywordChange:w,onSearch:n,description:"Privacyvriendelijke Brave Search suggesties.",extraFilters:k,results:y,placeholder:"Welke zoekterm wil je onderzoeken?",loading:S,error:j,emptyState:"Voer een zoekwoord in om Brave suggesties te zien."})};export{P as default};
