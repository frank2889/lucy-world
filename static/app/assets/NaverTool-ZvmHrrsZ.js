import{r as e,c as C,j as K}from"./index-C-suCUV6.js";import{P}from"./PlatformToolLayout-Dv7YUvVj.js";const q=y=>{const{keyword:v,setKeyword:w,searchLanguage:l,country:c,ui:m,locationControls:S,onGlobalSearch:k,globalLoading:N}=y,t=v??"",[E,u]=e.useState([]),[b,p]=e.useState(!1),[L,a]=e.useState(null),i=e.useRef(!1),r=e.useMemo(()=>C(m),[m]),s=e.useCallback(async j=>{const g=j.trim();if(!g){u([]),a(null);return}p(!0),a(null);try{const o=new URLSearchParams({q:g});l&&o.set("lang",l.toLowerCase()),c&&o.set("country",c.toLowerCase());const n=await fetch(`/api/platforms/naver?${o.toString()}`);if(!n.ok){const f=await n.json().catch(()=>null);throw new Error(f?.error||r("platform.naver.errors.fetch","Unable to fetch Naver suggestions"))}const d=await n.json(),h=(Array.isArray(d?.suggestions)?d.suggestions:[]).map((f,x)=>({title:f,subtitle:r("platform.naver.results.subtitle","Naver autosuggest result"),metric:r("platform.naver.results.rank","Popular #{{rank}}",{rank:x+1})}));u(h),h.length===0&&a(r("platform.naver.errors.noneFound","No Naver suggestions found for this keyword."))}catch(o){const n=o instanceof Error?o.message:r("platform.naver.errors.generic","Unknown error");a(n),u([])}finally{p(!1)}},[l,c,r]);return e.useEffect(()=>{if(!t.trim()){u([]),a(null),i.current=!1;return}i.current||(i.current=!0,s(t))},[t,s]),e.useEffect(()=>{t.trim()&&i.current&&s(t)},[l,c,t,s]),K.jsx(P,{platformName:r("platform.naver.meta.name","Naver"),keyword:t,onKeywordChange:w,onSearch:s,description:r("platform.naver.description","Search behaviour and content formats for Naver."),results:E,placeholder:r("platform.naver.placeholder","Which Korean term are you analysing?"),loading:b,error:L,emptyState:r("platform.naver.emptyState","Enter a keyword to see Naver opportunities."),controls:S,onGlobalSearch:k,globalLoading:N,translate:r})};export{q as default};
