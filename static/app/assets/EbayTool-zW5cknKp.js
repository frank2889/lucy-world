import{r as e,j as c}from"./index-DbsFPuxG.js";import{P as A}from"./PlatformToolLayout-Cks7JTvg.js";const y=[{country:"US",siteId:"0",label:"United States (eBay.com)"},{country:"CA",siteId:"2",label:"Canada (eBay.ca)"},{country:"GB",siteId:"3",label:"United Kingdom (eBay.co.uk)"},{country:"AU",siteId:"15",label:"Australia (eBay.com.au)"},{country:"AT",siteId:"16",label:"Austria (eBay.at)"},{country:"FR",siteId:"71",label:"France (eBay.fr)"},{country:"DE",siteId:"77",label:"Germany (eBay.de)"},{country:"BE",siteId:"23",label:"Belgium (eBay.be)"},{country:"IT",siteId:"101",label:"Italy (eBay.it)"},{country:"NL",siteId:"146",label:"Netherlands (eBay.nl)"},{country:"ES",siteId:"186",label:"Spain (eBay.es)"}],U="0",E=f=>{const m=(f||"").toUpperCase();return y.find(t=>t.country===m)?.siteId??U},L=({keyword:f,setKeyword:m,country:s})=>{const t=f??"",[r,g]=e.useState(()=>E(s)),[k,u]=e.useState([]),[v,b]=e.useState(!1),[j,o]=e.useState(null),n=e.useRef(!1),h=e.useMemo(()=>y.find(a=>a.siteId===r)??y[0],[r]);e.useEffect(()=>{g(E(s))},[s]);const l=e.useCallback(async a=>{const I=a.trim();if(!I){u([]),o(null);return}b(!0),o(null);try{const d=new URLSearchParams({q:I,siteId:r,country:(s||"").toUpperCase(),max:"10"}),i=await fetch(`/api/platforms/ebay?${d.toString()}`);if(!i.ok){const p=await i.json().catch(()=>null);throw new Error(p?.error||"Onbekende eBay fout")}const B=await i.json(),S=(Array.isArray(B?.suggestions)?B.suggestions:[]).map((p,x)=>({title:p,subtitle:`Zoeksuggestie uit ${h.label}`,metric:`Populariteit #${x+1}`}));u(S),S.length===0&&o("Geen eBay suggesties gevonden voor dit zoekwoord.")}catch(d){const i=d instanceof Error?d.message:"Onbekende fout";o(i),u([])}finally{b(!1)}},[r,s,h.label]);e.useEffect(()=>{if(!t.trim()){u([]),o(null),n.current=!1;return}n.current||(n.current=!0,l(t))},[t,l]),e.useEffect(()=>{t.trim()&&n.current&&l(t)},[r,t,l]);const w=c.jsx("div",{className:"platform-tool__filters",children:c.jsxs("label",{htmlFor:"ebay-site",children:["Marketplace",c.jsx("select",{id:"ebay-site",value:r,onChange:a=>{g(a.target.value),n.current=!1},children:y.map(a=>c.jsx("option",{value:a.siteId,children:a.label},a.siteId))})]})});return c.jsx(A,{platformName:"eBay",keyword:t,onKeywordChange:m,onSearch:l,description:"Listing- en prijsstrategieÃ«n voor eBay.",extraFilters:w,results:k,placeholder:"Welk product verkoop je op eBay?",loading:v,error:j,emptyState:"Voer een zoekwoord in voor eBay inzichten."})};export{L as default};
