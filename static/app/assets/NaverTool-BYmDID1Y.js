import{r as e,c as F,j as K}from"./index-C9S1em3K.js";import{P}from"./PlatformToolLayout-Cr6iLB8k.js";const N=v=>{const{keyword:w,setKeyword:S,searchLanguage:l,country:c,ui:m,uiFallback:p,locationControls:k,onGlobalSearch:E,globalLoading:L}=v,t=w??"",[b,i]=e.useState([]),[j,d]=e.useState(!1),[x,o]=e.useState(null),u=e.useRef(!1),r=e.useMemo(()=>F(m,p),[m,p]),s=e.useCallback(async C=>{const g=C.trim();if(!g){i([]),o(null);return}d(!0),o(null);try{const a=new URLSearchParams({q:g});l&&a.set("lang",l.toLowerCase()),c&&a.set("country",c.toLowerCase());const n=await fetch(`/api/platforms/naver?${a.toString()}`);if(!n.ok){const f=await n.json().catch(()=>null);throw new Error(f?.error||r("platform.naver.errors.fetch"))}const y=await n.json(),h=(Array.isArray(y?.suggestions)?y.suggestions:[]).map((f,R)=>({title:f,subtitle:r("platform.naver.results.subtitle"),metric:r("platform.naver.results.rank",{rank:R+1})}));i(h),h.length===0&&o(r("platform.naver.errors.noneFound"))}catch(a){const n=a instanceof Error?a.message:r("platform.naver.errors.generic");o(n),i([])}finally{d(!1)}},[l,c,r]);return e.useEffect(()=>{if(!t.trim()){i([]),o(null),u.current=!1;return}u.current||(u.current=!0,s(t))},[t,s]),e.useEffect(()=>{t.trim()&&u.current&&s(t)},[l,c,t,s]),K.jsx(P,{platformName:r("platform.naver.meta.name"),keyword:t,onKeywordChange:S,onSearch:s,description:r("platform.naver.description"),results:b,placeholder:r("platform.naver.placeholder"),loading:j,error:x,emptyState:r("platform.naver.emptyState"),controls:k,onGlobalSearch:E,globalLoading:L,translate:r})};export{N as default};
