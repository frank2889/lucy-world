import{r,c as L,j as C}from"./index-C-suCUV6.js";import{P as j}from"./PlatformToolLayout-Dv7YUvVj.js";const K=n=>{const{keyword:b,setKeyword:y,searchLanguage:c,ui:f}=n,t=b??"",[w,i]=r.useState([]),[k,m]=r.useState(!1),[S,a]=r.useState(null),l=r.useRef(!1),e=r.useMemo(()=>L(f),[f]),o=r.useCallback(async E=>{const g=E.trim();if(!g){i([]),a(null);return}m(!0),a(null);try{const u=new URLSearchParams({q:g,lang:(c||"").toLowerCase()}),s=await fetch(`/api/platforms/baidu?${u.toString()}`);if(!s.ok){const d=await s.json().catch(()=>null);throw new Error(d?.error||e("platform.baidu.error.fetch","Unable to fetch Baidu suggestions"))}const h=await s.json(),p=(Array.isArray(h?.suggestions)?h.suggestions:[]).map((d,B)=>({title:d,subtitle:e("platform.baidu.subtitle","Baidu search suggestion"),metric:e("platform.baidu.metric.rank","Hotness #{{rank}}",{rank:B+1})}));i(p),p.length===0&&a(e("platform.baidu.error.none","No Baidu suggestions found for this keyword."))}catch(u){const s=u instanceof Error?u.message:e("platform.baidu.error.generic","Unknown error");a(s),i([])}finally{m(!1)}},[c,e]);return r.useEffect(()=>{if(!t.trim()){i([]),a(null),l.current=!1;return}l.current||(l.current=!0,o(t))},[t,o]),r.useEffect(()=>{t.trim()&&l.current&&o(t)},[c,t,o]),C.jsx(j,{platformName:e("platform.baidu.meta.name","Baidu"),keyword:t,onKeywordChange:y,onSearch:o,description:e("platform.baidu.description","Insights for the Chinese search engine Baidu."),results:w,placeholder:e("platform.baidu.placeholder","Chinese keyword or brand"),loading:k,error:S,emptyState:e("platform.baidu.empty","Enter a keyword to discover Baidu ideas."),controls:n.locationControls,onGlobalSearch:n.onGlobalSearch,globalLoading:n.globalLoading,translate:e})};export{K as default};
