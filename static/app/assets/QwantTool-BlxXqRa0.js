import{r as e,j as i}from"./index-CgW13nsE.js";import{P as E}from"./PlatformToolLayout-BUBe3-FM.js";const C=[{value:"opensearch",label:"OpenSearch"},{value:"toolbar",label:"Toolbar"},{value:"mobile",label:"Mobile"}],O=({keyword:h,setKeyword:b,searchLanguage:d})=>{const t=h??"",[o,v]=e.useState("opensearch"),[y,c]=e.useState([]),[k,p]=e.useState(!1),[S,s]=e.useState(null),a=e.useRef(!1),n=e.useCallback(async r=>{const g=r.trim();if(!g){c([]),s(null);return}p(!0),s(null);try{const u=new URLSearchParams({q:g,lang:(d||"").toLowerCase(),client:o}),l=await fetch(`/api/platforms/qwant?${u.toString()}`);if(!l.ok){const m=await l.json().catch(()=>null);throw new Error(m?.error||"Onbekende Qwant fout")}const f=await l.json(),w=(Array.isArray(f?.suggestions)?f.suggestions:[]).map((m,x)=>({title:m,subtitle:`Qwant (${f?.metadata?.client||o})`,metric:`Suggestie #${x+1}`}));c(w),w.length===0&&s("Geen Qwant suggesties gevonden voor dit zoekwoord.")}catch(u){const l=u instanceof Error?u.message:"Onbekende fout";s(l),c([])}finally{p(!1)}},[o,d]);e.useEffect(()=>{if(!t.trim()){c([]),s(null),a.current=!1;return}a.current||(a.current=!0,n(t))},[t,n]),e.useEffect(()=>{t.trim()&&a.current&&n(t)},[o,t,n]);const j=e.useMemo(()=>i.jsx("div",{className:"platform-tool__filters",children:i.jsxs("label",{htmlFor:"qwant-client",children:["Client",i.jsx("select",{id:"qwant-client",value:o,onChange:r=>{v(r.target.value),a.current=!1},children:C.map(r=>i.jsx("option",{value:r.value,children:r.label},r.value))})]})}),[o]);return i.jsx(E,{platformName:"Qwant",keyword:t,onKeywordChange:b,onSearch:n,description:"Europese zoekmachine Qwant autocomplete.",extraFilters:j,results:y,placeholder:"Welke zoekterm wil je bekijken?",loading:k,error:S,emptyState:"Voer een zoekwoord in om Qwant suggesties te zien."})};export{O as default};
