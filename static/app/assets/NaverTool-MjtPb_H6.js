import{r as e,c as R,j as K}from"./index-BqAUk1Ix.js";import{P}from"./PlatformToolLayout-BVIQfinc.js";const F=h=>{const{keyword:v,setKeyword:w,searchLanguage:l,country:c,ui:m,locationControls:S,onGlobalSearch:E,globalLoading:L}=h,t=v??"",[k,i]=e.useState([]),[b,p]=e.useState(!1),[j,o]=e.useState(null),u=e.useRef(!1),r=e.useMemo(()=>R(m),[m]),s=e.useCallback(async x=>{const d=x.trim();if(!d){i([]),o(null);return}p(!0),o(null);try{const a=new URLSearchParams({q:d});l&&a.set("lang",l.toLowerCase()),c&&a.set("country",c.toLowerCase());const n=await fetch(`/api/platforms/naver?${a.toString()}`);if(!n.ok){const f=await n.json().catch(()=>null);throw new Error(f?.error||r("platform.naver.errors.fetch"))}const g=await n.json(),y=(Array.isArray(g?.suggestions)?g.suggestions:[]).map((f,C)=>({title:f,subtitle:r("platform.naver.results.subtitle"),metric:r("platform.naver.results.rank",{rank:C+1})}));i(y),y.length===0&&o(r("platform.naver.errors.noneFound"))}catch(a){const n=a instanceof Error?a.message:r("platform.naver.errors.generic");o(n),i([])}finally{p(!1)}},[l,c,r]);return e.useEffect(()=>{if(!t.trim()){i([]),o(null),u.current=!1;return}u.current||(u.current=!0,s(t))},[t,s]),e.useEffect(()=>{t.trim()&&u.current&&s(t)},[l,c,t,s]),K.jsx(P,{platformName:r("platform.naver.meta.name"),keyword:t,onKeywordChange:w,onSearch:s,description:r("platform.naver.description"),results:k,placeholder:r("platform.naver.placeholder"),loading:b,error:j,emptyState:r("platform.naver.emptyState"),controls:S,onGlobalSearch:E,globalLoading:L,translate:r})};export{F as default};
