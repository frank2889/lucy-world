import{r,j as f}from"./index-DbsFPuxG.js";import{P as R}from"./PlatformToolLayout-Cks7JTvg.js";const h=[{code:"wt-wt",label:"Wereldwijd"},{code:"us-en",label:"United States (English)"},{code:"uk-en",label:"United Kingdom (English)"},{code:"nl-nl",label:"Nederland (Nederlands)"},{code:"de-de",label:"Deutschland (Deutsch)"},{code:"fr-fr",label:"France (Français)"},{code:"es-es",label:"España (Español)"},{code:"it-it",label:"Italia (Italiano)"},{code:"jp-jp",label:"日本 (日本語)"},{code:"in-en",label:"India (English)"},{code:"br-pt",label:"Brasil (Português)"}],x=new Set(h.map(l=>l.code.toLowerCase())),N="wt-wt",j=(l,g)=>{const t=(l||"").split("-")[0].toLowerCase(),n=(g||"").split("-")[0].toLowerCase();if(t&&n){const e=`${n}-${t}`;if(x.has(e))return e}if(t)for(const e of h){const o=e.code.toLowerCase();if(o.endsWith(`-${t}`)||o.startsWith(`${t}-`))return o}return N},O=({keyword:l,setKeyword:g,searchLanguage:t,country:n})=>{const e=l??"",[o,w]=r.useState(()=>j(t,n)),[y,p]=r.useState([]),[S,b]=r.useState(!1),[v,c]=r.useState(null),i=r.useRef(!1);r.useEffect(()=>{w(j(t,n))},[t,n]);const u=r.useCallback(async a=>{const D=a.trim();if(!D){p([]),c(null);return}b(!0),c(null);try{const k=new URLSearchParams({q:D,kl:o,lang:(t||"").toLowerCase(),country:(n||"").toUpperCase()}),d=await fetch(`/api/platforms/duckduckgo?${k.toString()}`);if(!d.ok){const s=await d.json().catch(()=>null);throw new Error(s?.error||"Onbekende DuckDuckGo fout")}const m=await d.json(),E=(Array.isArray(m?.suggestions)?m.suggestions:[]).filter(s=>typeof s?.phrase=="string"&&s.phrase.trim().length>0).map((s,G)=>({title:s.phrase,subtitle:s.snippet||`DuckDuckGo (${m?.kl||o})`,metric:typeof s.score=="number"&&Number.isFinite(s.score)?`Relevantie score ${s.score}`:`Suggestie #${G+1}`}));p(E),E.length===0&&c("Geen DuckDuckGo suggesties gevonden voor dit zoekwoord.")}catch(k){const d=k instanceof Error?k.message:"Onbekende fout";c(d),p([])}finally{b(!1)}},[o,t,n]);r.useEffect(()=>{if(!e.trim()){p([]),c(null),i.current=!1;return}i.current||(i.current=!0,u(e))},[e,u]),r.useEffect(()=>{e.trim()&&i.current&&u(e)},[o,e,u]);const C=r.useMemo(()=>f.jsx("div",{className:"platform-tool__filters",children:f.jsxs("label",{htmlFor:"duckduckgo-region",children:["Regio",f.jsx("select",{id:"duckduckgo-region",value:o,onChange:a=>{w(a.target.value),i.current=!1},children:h.map(a=>f.jsx("option",{value:a.code,children:a.label},a.code))})]})}),[o]);return f.jsx(R,{platformName:"DuckDuckGo",keyword:e,onKeywordChange:g,onSearch:u,description:"Ontdek privacyvriendelijke zoekopdrachten met DuckDuckGo autocomplete.",extraFilters:C,results:y,placeholder:"Welke zoekterm wil je onderzoeken?",loading:S,error:v,emptyState:"Voer een zoekwoord in om DuckDuckGo suggesties te zien."})};export{O as default};
