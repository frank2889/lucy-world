import{r as e,j as l}from"./index-DbsFPuxG.js";import{P as Y}from"./PlatformToolLayout-Cks7JTvg.js";const z=[5,10,15,20],L=f=>{const u=Number(f);return Number.isFinite(u)?Math.min(Math.max(Math.round(u),1),20):10},R=({keyword:f,setKeyword:u,searchLanguage:g,country:d})=>{const t=f??"",[r,x]=e.useState(()=>L(void 0)),[b,c]=e.useState([]),[j,y]=e.useState(!1),[v,s]=e.useState(null),a=e.useRef(!1),n=e.useCallback(async o=>{const w=o.trim();if(!w){c([]),s(null);return}y(!0),s(null);try{const m=new URLSearchParams({q:w,lang:(g||"").toLowerCase(),country:(d||"").toUpperCase(),limit:String(r)}),i=await fetch(`/api/platforms/yahoo?${m.toString()}`);if(!i.ok){const p=await i.json().catch(()=>null);throw new Error(p?.error||"Onbekende Yahoo fout")}const h=await i.json(),S=(Array.isArray(h?.suggestions)?h.suggestions:[]).map((p,E)=>({title:p,subtitle:`Yahoo (${h?.country||d||"global"})`,metric:`Suggestie #${E+1}`}));c(S),S.length===0&&s("Geen Yahoo suggesties gevonden voor dit zoekwoord.")}catch(m){const i=m instanceof Error?m.message:"Onbekende fout";s(i),c([])}finally{y(!1)}},[r,g,d]);e.useEffect(()=>{if(!t.trim()){c([]),s(null),a.current=!1;return}a.current||(a.current=!0,n(t))},[t,n]),e.useEffect(()=>{t.trim()&&a.current&&n(t)},[r,t,n]);const k=e.useMemo(()=>l.jsx("div",{className:"platform-tool__filters",children:l.jsxs("label",{htmlFor:"yahoo-limit",children:["Resultaten",l.jsx("select",{id:"yahoo-limit",value:r,onChange:o=>{x(Number(o.target.value)),a.current=!1},children:z.map(o=>l.jsx("option",{value:o,children:o},o))})]})}),[r]);return l.jsx(Y,{platformName:"Yahoo",keyword:t,onKeywordChange:u,onSearch:n,description:"Yahoo zoekopdrachten met autocomplete suggesties.",extraFilters:k,results:b,placeholder:"Waar ben je naar op zoek?",loading:j,error:v,emptyState:"Voer een zoekwoord in om Yahoo suggesties te zien."})};export{R as default};
