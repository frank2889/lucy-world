import{r as a,j as d}from"./index-DbsFPuxG.js";import{P as M}from"./PlatformToolLayout-Cks7JTvg.js";const k=[{code:"en-US",label:"United States (English)"},{code:"en-GB",label:"United Kingdom (English)"},{code:"en-AU",label:"Australia (English)"},{code:"en-CA",label:"Canada (English)"},{code:"fr-FR",label:"France (Français)"},{code:"fr-CA",label:"Canada (Français)"},{code:"de-DE",label:"Deutschland (Deutsch)"},{code:"es-ES",label:"España (Español)"},{code:"es-MX",label:"México (Español)"},{code:"nl-NL",label:"Nederland (Nederlands)"},{code:"it-IT",label:"Italia (Italiano)"},{code:"pt-BR",label:"Brasil (Português)"},{code:"ja-JP",label:"日本 (日本語)"}],A="en-US",S=(g,p)=>{const e=(g||"").toLowerCase(),n=(p||"").toUpperCase(),t=`${e}-${n}`.toLowerCase();if(k.some(o=>o.code.toLowerCase()===t&&e&&n))return t;if(e){const o=k.find(u=>u.code.toLowerCase().startsWith(`${e}-`));if(o)return o.code}return A},U=({keyword:g,setKeyword:p,searchLanguage:e,country:n})=>{const t=g??"",[o,u]=a.useState(()=>S(e,n)),[y,f]=a.useState([]),[j,E]=a.useState(!1),[x,s]=a.useState(null),l=a.useRef(!1);a.useEffect(()=>{u(S(e,n))},[e,n]);const i=a.useCallback(async r=>{const w=r.trim();if(!w){f([]),s(null);return}E(!0),s(null);try{const m=new URLSearchParams({q:w,mkt:o,lang:(e||"").toLowerCase()}),c=await fetch(`/api/platforms/bing?${m.toString()}`);if(!c.ok){const h=await c.json().catch(()=>null);throw new Error(h?.error||"Onbekende Bing fout")}const b=await c.json(),C=(Array.isArray(b?.suggestions)?b.suggestions:[]).map((h,v)=>({title:h,subtitle:`Autocompletion (${b?.market||o})`,metric:`Populariteit #${v+1}`}));f(C),C.length===0&&s("Geen Bing suggesties gevonden voor dit zoekwoord.")}catch(m){const c=m instanceof Error?m.message:"Onbekende fout";s(c),f([])}finally{E(!1)}},[o,e]);a.useEffect(()=>{if(!t.trim()){f([]),s(null),l.current=!1;return}l.current||(l.current=!0,i(t))},[t,i]),a.useEffect(()=>{t.trim()&&l.current&&i(t)},[o,t,i]);const B=d.jsx("div",{className:"platform-tool__filters",children:d.jsxs("label",{htmlFor:"bing-market",children:["Markt",d.jsx("select",{id:"bing-market",value:o,onChange:r=>{u(r.target.value),l.current=!1},children:k.map(r=>d.jsx("option",{value:r.code,children:r.label},r.code))})]})});return d.jsx(M,{platformName:"Bing",keyword:t,onKeywordChange:p,onSearch:i,description:"Zoekmachine optimalisatie voor Microsoft Bing.",extraFilters:B,results:y,placeholder:"Welke zoekterm wil je in Bing ranken?",loading:j,error:x,emptyState:"Voer een zoekwoord in om Bing kansen te zien."})};export{U as default};
