import{r as e,j as c}from"./index-CgW13nsE.js";import{P as A}from"./PlatformToolLayout-BUBe3-FM.js";const E=[{code:"US",label:"United States"},{code:"GB",label:"United Kingdom"},{code:"CA",label:"Canada"},{code:"AU",label:"Australia"},{code:"DE",label:"Germany"},{code:"FR",label:"France"},{code:"ES",label:"Spain"},{code:"IT",label:"Italy"},{code:"NL",label:"Netherlands"},{code:"BR",label:"Brazil"},{code:"IN",label:"India"}],k=f=>{const p=(f||"").toUpperCase();return E.find(r=>r.code===p)?.code??"US"},O=({keyword:f,setKeyword:p,searchLanguage:d,country:r})=>{const o=f??"",[a,h]=e.useState(()=>k(r)),[G,u]=e.useState([]),[P,b]=e.useState(!1),[j,l]=e.useState(null),s=e.useRef(!1),v=e.useMemo(()=>E,[]);e.useEffect(()=>{h(k(r))},[r]);const n=e.useCallback(async t=>{const S=t.trim();if(!S){u([]),l(null);return}b(!0),l(null);try{const g=new URLSearchParams({q:S,country:a,lang:(d||"").toLowerCase(),limit:"10"}),i=await fetch(`/api/platforms/googleplay?${g.toString()}`);if(!i.ok){const y=await i.json().catch(()=>null);throw new Error(y?.error||"Onbekende Google Play fout")}const m=await i.json(),w=(Array.isArray(m?.suggestions)?m.suggestions:[]).map((y,R)=>({title:y,subtitle:`Zoeksuggestie (${m?.country?.toUpperCase()||a})`,metric:`Populariteit #${R+1}`}));u(w),w.length===0&&l("Geen Google Play suggesties gevonden voor dit zoekwoord.")}catch(g){const i=g instanceof Error?g.message:"Onbekende fout";l(i),u([])}finally{b(!1)}},[a,d]);e.useEffect(()=>{if(!o.trim()){u([]),l(null),s.current=!1;return}s.current||(s.current=!0,n(o))},[o,n]),e.useEffect(()=>{o.trim()&&s.current&&n(o)},[a,d,o,n]);const x=c.jsx("div",{className:"platform-tool__filters",children:c.jsxs("label",{htmlFor:"google-play-region",children:["Regio",c.jsx("select",{id:"google-play-region",value:a,onChange:t=>{h(t.target.value),s.current=!1},children:v.map(t=>c.jsx("option",{value:t.code,children:t.label},t.code))})]})});return c.jsx(A,{platformName:"Google Play",keyword:o,onKeywordChange:p,onSearch:n,description:"ASO voor Android apps in Google Play.",extraFilters:x,results:G,placeholder:"Welk Android keyword onderzoek je?",loading:P,error:j,emptyState:"Voer een zoekwoord in om Google Play kansen te zien."})};export{O as default};
