import{r as e,c as j,j as E}from"./index-DbcZiReQ.js";import{P as T}from"./PlatformToolLayout-CscNAisM.js";const K=f=>{const{keyword:y,setKeyword:d,searchLanguage:n,ui:r,locationControls:b,onGlobalSearch:h,globalLoading:S}=f,[w,a]=e.useState([]),[x,u]=e.useState(!1),[L,c]=e.useState(null),t=e.useMemo(()=>j(r),[r]),m=e.useMemo(()=>(n||r?.lang||"en").split("-")[0].toLowerCase(),[n,r?.lang]),i=e.useCallback(async s=>{const p=s.trim();if(!p){a([]);return}u(!0),c(null);try{const l=new URLSearchParams({q:p,lang:m}),g=await fetch(`/api/platforms/youtube?${l.toString()}`),o=await g.json().catch(()=>({}));if(!g.ok)throw new Error(o?.error||t("platform.youtube.errors.fetch"));const v=(Array.isArray(o?.suggestions)?o.suggestions:[]).map(C=>({title:C,subtitle:t("platform.youtube.results.subtitle"),metric:o?.metadata?.approx_volume?t("platform.youtube.results.metric",{volume:o.metadata.approx_volume}):void 0}));a(v)}catch(l){c(l?.message||t("platform.youtube.errors.generic")),a([])}finally{u(!1)}},[m,t]),k=e.useCallback(s=>{i(s)},[i]);return E.jsx(T,{platformName:t("platform.youtube.meta.name"),keyword:y||"",onKeywordChange:d,onSearch:k,description:t("platform.youtube.description"),results:w,placeholder:t("platform.youtube.placeholder"),emptyState:t("platform.youtube.emptyState"),loading:x,error:L,controls:b,onGlobalSearch:h,globalLoading:S,translate:t})};export{K as default};
